<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Информация о платеже</title>
    <script src="https://widget.cloudpayments.ru/bundles/cloudpayments"></script>
    <script src="/assets/js/plugins/jquery-3.4.1.js"></script>
</head>
<script>
var pay = function () {
 var widget = new cp.CloudPayments();
    widget.pay('auth', // или 'charge'
        { //options
            publicId: 'test_api_00000000000000000000001', //id из личного кабинета
            description: 'Оплата товаров в example.com', //назначение
            amount: 100, //сумма
            currency: 'RUB', //валюта
            accountId: 'user@example.com', //идентификатор плательщика (необязательно)
            invoiceId: '1234567', //номер заказа  (необязательно)
            skin: "mini", //дизайн виджета (необязательно)
            data: {
                myProp: 'myProp value'
            }
        },
        {
            onSuccess: function (options) { // success
                //действие при успешной оплате
            },
            onFail: function (reason, options) { // fail
                //действие при неуспешной оплате
            },
            onComplete: function (paymentResult, options) { //Вызывается как только виджет получает от api.cloudpayments ответ с результатом транзакции.
                //например вызов вашей аналитики Facebook Pixel
            }
        }
    )
};
  
    $(document).on('click', '#pay', function (e) {
        e.preventDefault();
        pay();
    });
  
</script>
<body>
    <form method="post">
        <section>
            <h2>Персональные данные</h2>
              <label for="name">
                <span>Имя: </span>
              </label>
              <input type="text" id="name" name="username">
            </p>
            <p>
              <label for="mail">
                <span>E-mail: </span>
              </label>
              <input type="email" id="mail" name="usermail">
            </p>
      </section>
<p> <button class="button" type="button" id="pay">Внести пожертвование</button> </p>
</section>
</form>
</body>
</html>
